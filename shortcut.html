<html lang='en'>
  <head>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <script crossorigin src='https://unpkg.com/react@16/umd/react.development.js'></script>
    <script crossorigin src='https://unpkg.com/react-dom@16/umd/react-dom.development.js'></script>
    <script src='https://unpkg.com/@babel/standalone/babel.min.js'></script>
    <style>
    :root{
      color-scheme: dark;
    }
    </style>
  </head>
  <body style="margin: 0">
    <div id='root'></div>

    <script type='text/babel'>
      const {
        useState,
        useEffect,
      } = React;

      function App() {
        const [shortcuts, setShortcuts] = useState(null);
        const [background, setBackground] = useState(null);

        useEffect(() => {
          async function populateShortcuts() {
            const response = await fetch('https://derekantrican.com/shortcuts.json');
            setShortcuts(await response.json());
          };

          async function setBackgroundImage() {
            const response = await fetch('https://www.reddit.com/r/EarthPorn/hot/.json?limit=5');
            const data = await response.json();
            setBackground(data.data.children.find(p => 
                !p.data.is_self && 
                p.data.thumbnail != 'default' && 
                !p.data.stickied && 
                p.data.preview.images[0].source.width > p.data.preview.images[0].source.height
            ).data.url);
          };

          populateShortcuts();
          setBackgroundImage();
        }, []);     

        const columns = Array.from(Array(8).keys());
        const rows = Array.from(Array(4).keys());

        return (
            <div style={{display: 'flex', flexDirection: 'row', height: '100%', padding: 8,
                         backgroundImage: `url(${background})`, backgroundSize: 'cover'}}>
                <div style={{display: 'grid', gridTemplateColumns: 'repeat(8, 200px)', gridGap: 5, height: '100%'}}>
                    {shortcuts ? shortcuts.map(shortcut =>
                        shortcut ?
                            <a style={{margin: 'auto'}} href={shortcut.url}>
                                <img style={{height: 200, width: 200, objectFit: 'contain'}} src={shortcut.icon}/>
                            </a>
                        : <div style={{height: 200, width: 200}}/> //Fill empty spaces
                    ) : null}
                </div>
            </div>
        );
      };

      ReactDOM.render(
        <App />,
        document.getElementById('root')
      );
    </script>
  </body>
</html>